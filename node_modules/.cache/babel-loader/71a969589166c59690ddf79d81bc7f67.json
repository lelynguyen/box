{"ast":null,"code":"import { useCallback, useEffect, useRef, useState, useMemo } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { snowfallBaseStyle } from './config.js';\nimport { getSize } from './utils.js';\n/**\n * Returns the height and width of a HTML element, uses the `ResizeObserver` api if available to detect changes to the\n * size. Falls back to listening for resize events on the window.\n * @param ref A ref to the HTML element to be measured\n */\nexport const useComponentSize = ref => {\n  const [size, setSize] = useState(getSize(ref.current));\n  const resizeHandler = useCallback(() => {\n    if (ref.current) {\n      setSize(getSize(ref.current));\n    }\n  }, [ref]);\n  useEffect(() => {\n    const {\n      ResizeObserver\n    } = window;\n    if (!ref.current) return;\n    resizeHandler();\n    if (typeof ResizeObserver === 'function') {\n      const resizeObserver = new ResizeObserver(resizeHandler);\n      resizeObserver.observe(ref.current);\n      return () => resizeObserver.disconnect();\n    } else {\n      window.addEventListener('resize', resizeHandler);\n      return () => window.removeEventListener('resize', resizeHandler);\n    }\n  }, [ref, resizeHandler]);\n  return size;\n};\n/**\n * Utility hook that merges any provided styles with the default styles\n * @param overrides The style prop passed into the component\n */\nexport const useSnowfallStyle = overrides => {\n  const styles = useMemo(() => ({\n    ...snowfallBaseStyle,\n    ...(overrides || {})\n  }), [overrides]);\n  return styles;\n};\n/**\n * Same as `React.useEffect` but uses a deep comparison on the dependency array. This should only\n * be used when working with non-primitive dependencies.\n *\n * @param effect Effect callback to run\n * @param deps Effect dependencies\n */\nexport function useDeepCompareEffect(effect, deps) {\n  const ref = useRef(deps);\n  // Only update the current dependencies if they are not deep equal\n  if (!isEqual(deps, ref.current)) {\n    ref.current = deps;\n  }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useEffect(effect, ref.current);\n}\n/**\n * Utility hook to stabilize a reference to a value, the returned value will always match the input value\n * but (unlike an inline object) will maintain [SameValueZero](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * equality until a change is made.\n *\n * @example\n *\n * const obj = useDeepMemo({ foo: 'bar', bar: 'baz' }) // <- inline object creation\n * const prevValue = usePrevious(obj) // <- value from the previous render\n * console.log(obj === prevValue) // <- always logs true until value changes\n */\nexport function useDeepMemo(value) {\n  const [state, setState] = useState(value);\n  useDeepCompareEffect(() => setState(value), [value]);\n  return state;\n}","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","useMemo","isEqual","snowfallBaseStyle","getSize","useComponentSize","ref","size","setSize","current","resizeHandler","ResizeObserver","window","resizeObserver","observe","disconnect","addEventListener","removeEventListener","useSnowfallStyle","overrides","styles","useDeepCompareEffect","effect","deps","useDeepMemo","value","state","setState"],"sources":["../src/hooks.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AACzE,OAAOC,OAAO,MAAM,oBAAoB;AACxC,SAASC,iBAAiB,QAAQ,aAAa;AAC/C,SAASC,OAAO,QAAQ,YAAY;AAEpC;;;;;AAKA,OAAO,MAAMC,gBAAgB,GAAIC,GAAiC,IAAI;EACpE,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAACI,OAAO,CAACE,GAAG,CAACG,OAAO,CAAC,CAAC;EAEtD,MAAMC,aAAa,GAAGb,WAAW,CAAC,MAAK;IACrC,IAAIS,GAAG,CAACG,OAAO,EAAE;MACfD,OAAO,CAACJ,OAAO,CAACE,GAAG,CAACG,OAAO,CAAC,CAAC;IAC/B;EACF,CAAC,EAAE,CAACH,GAAG,CAAC,CAAC;EAETR,SAAS,CAAC,MAAK;IACb,MAAM;MAAEa;IAAc,CAAE,GAAGC,MAAM;IAEjC,IAAI,CAACN,GAAG,CAACG,OAAO,EAAE;IAClBC,aAAa,EAAE;IAEf,IAAI,OAAOC,cAAc,KAAK,UAAU,EAAE;MACxC,MAAME,cAAc,GAAG,IAAIF,cAAc,CAACD,aAAa,CAAC;MACxDG,cAAc,CAACC,OAAO,CAACR,GAAG,CAACG,OAAO,CAAC;MAEnC,OAAO,MAAMI,cAAc,CAACE,UAAU,EAAE;IAC1C,CAAC,MAAM;MACLH,MAAM,CAACI,gBAAgB,CAAC,QAAQ,EAAEN,aAAa,CAAC;MAEhD,OAAO,MAAME,MAAM,CAACK,mBAAmB,CAAC,QAAQ,EAAEP,aAAa,CAAC;IAClE;EACF,CAAC,EAAE,CAACJ,GAAG,EAAEI,aAAa,CAAC,CAAC;EAExB,OAAOH,IAAI;AACb,CAAC;AAED;;;;AAIA,OAAO,MAAMW,gBAAgB,GAAIC,SAA+B,IAAyB;EACvF,MAAMC,MAAM,GAAGnB,OAAO,CACpB,OAAO;IACL,GAAGE,iBAAiB;IACpB,IAAIgB,SAAS,IAAI,EAAE;GACpB,CAAC,EACF,CAACA,SAAS,CAAC,CACZ;EAED,OAAOC,MAAM;AACf,CAAC;AAED;;;;;;;AAOA,OAAM,SAAUC,oBAAoBA,CAACC,MAA4B,EAAEC,IAA0B;EAC3F,MAAMjB,GAAG,GAAGP,MAAM,CAAuBwB,IAAI,CAAC;EAE9C;EACA,IAAI,CAACrB,OAAO,CAACqB,IAAI,EAAEjB,GAAG,CAACG,OAAO,CAAC,EAAE;IAC/BH,GAAG,CAACG,OAAO,GAAGc,IAAI;EACpB;EAEA;EACA,OAAOzB,SAAS,CAACwB,MAAM,EAAEhB,GAAG,CAACG,OAAO,CAAC;AACvC;AAEA;;;;;;;;;;;AAWA,OAAM,SAAUe,WAAWA,CAAIC,KAAQ;EACrC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAACyB,KAAK,CAAC;EAEzCJ,oBAAoB,CAAC,MAAMM,QAAQ,CAACF,KAAK,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEpD,OAAOC,KAAK;AACd","ignoreList":[]},"metadata":{},"sourceType":"module"}